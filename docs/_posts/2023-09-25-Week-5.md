---
title: "Week 5 - First Set"
image: ../assets/images/logo.png
categories:
  - Weekly Log
tags:
  - github pages
  - ROS2
  - Gazebo
  - PID Controllers
  - Autonomous Driving
---

# Summary

Building upon the foundation laid in my initial post, this week was dedicated to developing Pilot 2.0, a more advanced version controlled by two PID controllers – one for linear speed and another for angular speed.

# Progress This Week

I engaged in the practical application of combining ROS2 with our simple circuit simulation in Gazebo. The primary task involved utilizing an ROS2 HAL class to process images from the car's camera and to transmit speed commands, effectively bringing Pilot 2.0 to life.

## Overcoming PID Controller Challenges

The first major hurdle was inverting the existing PID controller logic. In its original form, a larger error increased the speed, which was contrary to the desired functionality. After testing various approaches, including experimenting with a 1/PID formula, I opted for a more straightforward solution:

- Inversion Formula: `maxspeed + minimumspeed - PID`

This method ensured the output remained within the predefined speed limits. For instance, with a max speed of 10 and min speed of 5:

- PID output of 5 resulted in 10 (10 + 5 - 5)
- PID output of 10 led to 5 (10 + 5 - 10)
- PID output of 7 yielded 8 (10 + 5 - 7)

## Tuning the P, I, D Parameters

Fine-tuning the proportional (P), integral (I), and derivative (D) parameters was a complex task due to the six-variable scenario – three each for the linear and angular PIDs. Despite these challenges, the adjustments paid off, enabling Pilot 2.0 to complete the simulated circuit in just over a minute.

## Data Collection for Future Analysis

With the successful implementation of Pilot 2.0, I utilized ROS2 bag to collect data from this experiment. This dataset will be crucial for analysis and further improvements in the upcoming week.



